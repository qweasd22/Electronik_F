{% extends 'base_generic.html' %}
{%load static %}
{% block content %}
    <h1>Новости</h1>
    
    <!-- Фильтр по категориям -->
    <form method="GET" action="{% url 'news_list' %}">
        <select name="category">
            <option value="">Все категории</option>
            {% for category in categories %}
                <option value="{{ category.name }}" {% if category.name == selected_category %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
        <button type="submit">Фильтровать</button>
    </form>

    <div class="news-list">
        {% for news_item in news %}
            <div class="news-item">
                <h2><a href="{% url 'news_detail' pk=news_item.id %}">{{ news_item.title }}</a></h2>
                <p>{{ news_item.summary }}</p>
                <p><strong>Дата публикации:</strong> {{ news_item.published_at|date:"d M Y" }}</p>
                {% if news_item.image %}
                    <img src="{{ news_item.image.url }}" alt="{{ news_item.title }}" class="news-image">
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock %}
